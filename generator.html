function generate() {
    const android = encodeURIComponent(document.getElementById('android').value);
    const ios = encodeURIComponent(document.getElementById('ios').value);
    const fallback = encodeURIComponent(document.getElementById('fallback').value);
  
    const baseUrl = "https://bdangvnt.github.io/qr-generate/";
    const fullUrl = `${baseUrl}?android=${android}&ios=${ios}&fallback=${fallback}`;
  
    document.getElementById("linkOutput").innerText = fullUrl;
  
    // Tạo QR không viền - cố định size 378px (~10cm)
    const qr = qrcode(0, 'H');
    qr.addData(fullUrl);
    qr.make();
  
    const moduleCount = qr.getModuleCount();
    const finalSize = 378; // pixels ~ 10cm
    const cellSize = Math.floor(finalSize / moduleCount);
  
    const canvasSize = cellSize * moduleCount;
  
    const canvas = document.createElement('canvas');
    canvas.width = canvas.height = canvasSize;
    const ctx = canvas.getContext('2d');
  
    for (let row = 0; row < moduleCount; row++) {
      for (let col = 0; col < moduleCount; col++) {
        ctx.fillStyle = qr.isDark(row, col) ? "#000000" : "#ffffff";
        ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
      }
    }
  
    const qrContainer = document.getElementById("qr");
    qrContainer.innerHTML = "";
    qrContainer.appendChild(canvas);
  
    const downloadLink = document.getElementById("downloadLink");
    downloadLink.href = canvas.toDataURL("image/png");
    downloadLink.style.display = "inline-block";
  }
  