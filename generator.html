<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QR Redirect Generator</title>
</head>
<body>
  <h1>T·∫°o QR Code redirect theo h·ªá ƒëi·ªÅu h√†nh</h1>

  <label>Link Android: <input type="text" id="android" /></label><br/>
  <label>Link iOS: <input type="text" id="ios" /></label><br/>
  <label>Link fallback: <input type="text" id="fallback" /></label><br/><br/>
  <button onclick="generate()">T·∫°o Link & QR</button>

  <p><strong>Link redirect:</strong> <span id="linkOutput"></span></p>

  <div id="qr"></div>
  <a id="downloadLink" download="qr_redirect.png" style="display:none;">T·∫£i QR v·ªÅ (PNG)</a>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script>
    function generate() {
      const android = encodeURIComponent(document.getElementById('android').value);
      const ios = encodeURIComponent(document.getElementById('ios').value);
      const fallback = encodeURIComponent(document.getElementById('fallback').value);
      const baseUrl = "https://bdangvnt.github.io/qr-generate/";
      const fullUrl = `${baseUrl}?android=${android}&ios=${ios}&fallback=${fallback}`;

      document.getElementById("linkOutput").innerText = fullUrl;

      // T·∫°o m√£ QR ch·∫•t l∆∞·ª£ng cao
      const qr = new QRious({
        value: fullUrl,
        size: 600, // üëà tƒÉng k√≠ch th∆∞·ªõc ·∫£nh (px)
        level: 'H' // üëà High error correction
      });

      // Hi·ªÉn th·ªã ·∫£nh QR
      const qrContainer = document.getElementById("qr");
      qrContainer.innerHTML = "";
      const canvas = qr.canvas;
      qrContainer.appendChild(canvas);

      // Cung c·∫•p link t·∫£i PNG
      const downloadLink = document.getElementById("downloadLink");
      downloadLink.href = canvas.toDataURL("image/png");
      downloadLink.style.display = "inline-block";
    }
  </script>
</body>
</html>
